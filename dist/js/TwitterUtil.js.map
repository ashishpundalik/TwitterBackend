{"version":3,"sources":["../../src/js/TwitterUtil.js"],"names":["TwitterUtil","twitterConfig","require","Twitter","CustomTweetFactory","errorCB","successCB","isAdapterInitialized","twitter","consumerKey","consumerSecretKey","applicationToken","applicationTokenSecretKey","callBackUrl","getUserTimeline","twitterHandle","tweetCount","Error","console","log","screen_name","count","twitterAuthFailure","bind","response","jsonResp","JSON","parse","twitterAuthSuccess","call","getMyTweets","getReTweetsOfMe","getSearchedTweets","hashtag","tweetsCount","getSearch","statuses","tweets","build","exception","error","module","exports"],"mappings":"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","file":"TwitterUtil.js","sourcesContent":["var TwitterUtil = (function() {\n\t\"use strict\";\n\n\tvar twitterConfig = require('./config/twitterAuthConfig.json');\n\tvar Twitter = require('twitter-node-client').Twitter;\n\n\tvar CustomTweetFactory = require('./CustomTweetFactory.js');\n\n\tvar errorCB, successCB;\n\n\tvar isAdapterInitialized = false;\n\n\tvar twitter = new Twitter({\n\t    \"consumerKey\": twitterConfig.consumerKey,\n\t    \"consumerSecret\": twitterConfig.consumerSecretKey,\n\t    \"accessToken\": twitterConfig.applicationToken,\n\t    \"accessTokenSecret\": twitterConfig.applicationTokenSecretKey,\n\t    \"callBackUrl\": twitterConfig.callBackUrl\n\t});\n\n\tvar getUserTimeline = function(twitterHandle, tweetCount, errorCB, successCB) {\n\t\tif(!successCB || !errorCB) {\n\t\t\tthrow new Error(\"Need to supply a success and an error callback\");\n\t\t} else {\n\t\t\tconsole.log(twitterHandle, tweetCount);\n\t\t\ttwitter.getUserTimeline({ screen_name: twitterHandle, count: tweetCount},\n\t\t\ttwitterAuthFailure.bind(this, errorCB), function(response) {\n\t\t\t\tvar jsonResp = JSON.parse(response);\n\t\t\t\ttwitterAuthSuccess.call(this, errorCB, successCB, jsonResp);\n\t\t\t});\n\t\t}\n\t};\n\n\tvar getMyTweets = function(tweetCount, errorCB, successCB) {\n\t\tif(!successCB || !errorCB) {\n\t\t\tthrow new Error(\"Need to supply a success and an error callback\");\n\t\t} else {\n\t\t\ttwitter.getReTweetsOfMe({count: tweetCount}, twitterAuthFailure.bind(this, errorCB), function(response) {\n\t\t\t\tvar jsonResp = JSON.parse(response);\n\t\t\t\ttwitterAuthSuccess.call(this, errorCB, successCB, jsonResp);\n\t\t\t});\n\t\t}\n\t}\n\n\tvar getSearchedTweets = function(hashtag, tweetsCount, errorCB, successCB) {\n\t\tif(!successCB || !errorCB) {\n\t\t\tthrow new Error(\"Need to supply a success and an error callback\");\n\t\t} else {\n\t\t\ttwitter.getSearch({'q': \"#\"+hashtag, 'count': tweetsCount}, twitterAuthFailure.bind(this, errorCB), function(response) {\n\t\t\t\tvar jsonResp = JSON.parse(response);\n\t\t\t\ttwitterAuthSuccess.call(this, errorCB, successCB, jsonResp.statuses);\n\t\t\t});\n\t\t}\t\n\t}\n\n\tvar twitterAuthSuccess = function(errorCB, successCB, response) {\n\t\tconsole.log(\"Response: \",response);\n\t\ttry {\n\t\t\tvar tweets = CustomTweetFactory.build(response);\n\t\t\tsuccessCB(tweets);\n\t\t} catch(exception) {\n\t\t\tconsole.log(\"Exception occured in parsing tweets: \", exception);\n\t\t\terrorCB(exception)\n\t\t}\n\t};\n\n\tvar twitterAuthFailure = function(errorCB, error) {\n\t\tconsole.log(\"Failure calling twitter API: \", error);\n\t\terrorCB(error);\n\t}\n\n\treturn {getUserTimeline, getMyTweets, getSearchedTweets};\n})();\n\nmodule.exports = TwitterUtil;"]}